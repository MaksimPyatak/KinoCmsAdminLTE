import{_ as M,r as d,w as $,u as ae,a as A,b as I,t as le,s as ne,d as N,o as f,c as B,e as x,f as y,g as T,h as o,i as j,v as X,j as R,k as O,l as de,m as P,n as Z,p as H,q as ce,P as J,x as ie,y as _e,z as G,A as K,B as ve,C as he,D as ge,E as fe,F as pe,G as z,H as oe,I as te,J as me,K as Q,L as Y,M as be,N as ye}from"./index-db9c0546.js";import{F as se,G as re,I as Se}from"./ImageCard-7603fb66.js";import{C as q}from"./CastomButton-50b667de.js";import"./index.esm-fb009f5d.js";const V=t=>(G("data-v-9171cdf6"),t=t(),K(),t),Be={class:"through-banner"},xe={class:"through-banner__main-block"},ke={class:"through-banner__checkbox-section"},we={class:"through-banner__checkbox-box"},Fe=V(()=>o("label",{class:"through-banner__checkbox-lebel",for:"img"},"Фото на фон",-1)),Ce={class:"through-banner__checkbox-box"},Ue=V(()=>o("label",{class:"through-banner__checkbox-lebel",for:"color"},"Колір на фон",-1)),Ie={class:"through-banner__adding-section"},Te={key:0,class:"through-banner__photo-box"},$e={key:0,class:"through-banner__img-box"},Me={class:"through-banner__img"},Ne=["src"],Oe={key:1,class:"through-banner__selected-color-box"},Pe={class:"through-banner__color-box"},Ve=V(()=>o("label",{for:"colorWell"},"Color:",-1)),Le=V(()=>o("span",null,"Зберегти",-1)),De={__name:"ThroughBanner",props:{name:{type:String,required:!0}},emits:["goingLoading"],setup(t,{emit:_}){const a=t,c=d(!1);$(c,e=>{console.log(e),_("goingLoading",e)});const u=ae();A(()=>{w()});function s(){v.value=null,k.value=null}const r=d(""),v=d(null),k=d(null),F=d(null),h=d({}),L=I(()=>Object.keys(h.value).length>0||k.value?!1:!C.value),p=d({});let S;async function w(){try{S=await le(ne(N,a.name)),S.empty||S.forEach(e=>{p.value=e.data(),e.data().downloadUrl&&(v.value=e.data().downloadUrl),e.data().whichBanner&&(r.value=e.data().whichBanner),e.data().selectingColor&&(F.value=e.data().selectingColor)})}catch(e){console.log(e)}}const C=d(null);$(v,(e,i)=>{e==null&&e!=i&&(C.value=!0)}),$(r,e=>{p.value.whichBanner!=e?h.value.whichBanner=e:h.value.whichBanner&&p.value.whichBanner==e&&delete h.value.whichBanner}),$(F,e=>{p.value.selectingColor!=e?h.value.selectingColor=e:h.value.selectingColor&&p.value.selectingColor==e&&delete h.value.selectingColor});function U(e){for(const i of e)v.value=URL.createObjectURL(i),k.value=i}async function D(){try{new Promise((e,i)=>{c.value=!0,k.value==null&&C.value?Z(p.value.fullPath).then(()=>{const n=H(N,a.name,"main");ce(n,{fullPath:J(),downloadUrl:J()})}).then(()=>{delete p.value.fullPath,delete p.value.downloadUrl,console.log(p.value),C.value=null,e()}).catch(n=>{console.log(n),i()}):k.value?ie(k.value,"banners/"+a.name+"/").then(n=>(p.value.fullPath&&Z(p.value.fullPath),n),n=>console.log(n)).then(n=>{h.value.downloadUrl=n.downloadUrl,h.value.fullPath=n.metadata.fullPath,e()},n=>console.log(n)).catch(n=>{console.log(n),i()}):(e(),i())}).then(()=>{Object.keys(h.value).length&&(_e(H(N,a.name,"main"),h.value,{merge:!0}),k.value=null,Object.keys(h.value).forEach(e=>{p.value[e]=h.value[e],delete h.value[e]})),c.value=!1,u.addMessage("Наскрізний банер на задньому фоні",!1)})}catch(e){c.value=!1,u.addMessage(a.name,!0),console.log("Наскрізний банер на задньому фоні"+e)}}return(e,i)=>(f(),B("div",Be,[x(re,null,{title:y(()=>[T(" Наскрізний банер на задньому фоні ")]),label:y(()=>[]),body:y(()=>[o("div",xe,[o("div",ke,[o("div",we,[j(o("input",{class:"through-banner__checkbox-input",type:"radio",id:"img",name:"through-banner",value:"img","onUpdate:modelValue":i[0]||(i[0]=n=>r.value=n)},null,512),[[X,r.value]]),Fe]),o("div",Ce,[j(o("input",{class:"through-banner__checkbox-input",type:"radio",id:"color",name:"through-banner",value:"color","onUpdate:modelValue":i[1]||(i[1]=n=>r.value=n)},null,512),[[X,r.value]]),Ue])]),o("div",Ie,[r.value=="img"?(f(),B("div",Te,[v.value?(f(),B("div",$e,[o("div",Me,[o("img",{src:v.value},null,8,Ne)])])):R("",!0),x(se,{class:"through-banner__upload",multiple:!1,onUploadedFiles:U}),v.value?(f(),O(q,{key:1,class:"through-banner__del-photo-btn",onClick:s},{default:y(()=>[T(" Видалити ")]),_:1})):R("",!0)])):(f(),B("div",Oe,[o("div",Pe,[Ve,j(o("input",{type:"color","onUpdate:modelValue":i[2]||(i[2]=n=>F.value=n)},null,512),[[de,F.value]])])]))])])]),footer:y(()=>[x(q,{class:"through-banner__saving-button",onClick:D,disabled:P(L),loading:c.value},{default:y(()=>[Le]),_:1},8,["disabled","loading"])]),_:1})]))}},Ee=M(De,[["__scopeId","data-v-9171cdf6"]]);const je={},Re=t=>(G("data-v-a9e24223"),t=t(),K(),t),qe={class:"modal"},Ae=Re(()=>o("div",{class:"modal__box"},[o("h1",null,[T("ЗАЧЕКАЙТЕ, "),o("br"),T("ІДЕ ЗАВАНТАЖЕННЯ")])],-1)),Ge=[Ae];function Ke(t,_){return f(),B("div",qe,Ge)}const ze=M(je,[["render",Ke],["__scopeId","data-v-a9e24223"]]);const We=["aria-checked","onKeydown"],Xe={__name:"ToggleCheckbox",props:{value:Boolean},emits:["inputValue"],setup(t,{emit:_}){const a=t,c=I(()=>({"gold-mid":a.value,"gray-lighter":!a.value})),u=I(()=>({transform:a.value?"translateX(14px)":"translateX(0)"}));function s(){_("inputValue",!a.value)}return(r,v)=>(f(),B("div",null,[o("span",{class:"toggle-wrapper",role:"checkbox","aria-checked":t.value.toString(),tabindex:"0",onClick:s,onKeydown:ge(fe(s,["prevent"]),["space"])},[o("span",{class:ve(["toggle-background",P(c)])},null,2),o("span",{class:"toggle-indicator",style:he(P(u))},null,4)],40,We)]))}},Ze=M(Xe,[["__scopeId","data-v-6d87246f"]]);const He={class:"select"},Je={for:"select",class:"select__label-select"},Qe=["value"],Ye=["value"],ea={__name:"CastomSelect",props:["modelValue","selectText","selectValue"],emits:["update:modelValue"],setup(t){const _=t,a=d([]);function c(){const u=_.selectValue!==void 0?_.selectValue:_.selectText;for(let s=0;s<_.selectText.length;s++)a.value.push({value:_.selectText[s],text:u[s]})}return A(()=>{c()}),(u,s)=>(f(),B("div",He,[o("label",Je,[pe(u.$slots,"default",{},void 0,!0)]),o("select",{class:"select__body",name:"select",value:_.modelValue,onInput:s[0]||(s[0]=r=>u.$emit("update:modelValue",r.target.value))},[(f(!0),B(z,null,oe(a.value,r=>(f(),B("option",{value:r.value,key:r.value},te(r.text),9,Ye))),128))],40,Qe)]))}},aa=M(ea,[["__scopeId","data-v-c8e98b8d"]]);const la=t=>(G("data-v-9d4628d6"),t=t(),K(),t),na={class:"banner__main-block"},oa=la(()=>o("span",null,"Зберегти",-1)),ta={__name:"UniversalBanner",props:{name:{type:String,required:!0},folderForSaveFile:{type:String,required:!0},nameBanners:{type:String,required:""}},emits:["goingLoading"],setup(t,{emit:_}){const a=t,c=ae(),u=d(!0),s=d(!0),r=I(()=>u.value!=s.value),v=d(!1);$(v,l=>{_("goingLoading",l)}),A(()=>{k(a.name,w.value)});async function k(l,g){(await le(ne(N,l))).forEach(b=>{b.id!="showingBlock"&&b.id!="sliderSpeed"?g.push(b.data()):b.id=="showingBlock"?(u.value=b.data().show,s.value=b.data().show):b.id=="sliderSpeed"&&(n.value=b.data().speed,E.value=b.data().speed)})}async function F(){try{new Promise((l,g)=>{v.value=!0,Object.keys(S.value).length||Object.keys(U.value).length?new Promise((m,b)=>{me(S.value,a.name,U.value,a.folderForSaveFile+"/"+a.name+"/",w.value).then(()=>{m(),b()})}).then(()=>l(),()=>g()):(l(),g())}).catch(l=>console.log(l)).then(()=>{r.value&&(Q("showingBlock",a.name,"show",u.value,!1),s.value=u.value)},l=>{console.log(l)}).then(()=>{W.value&&(Q("sliderSpeed",a.name,"speed",n.value,!1),E.value=n.value)},l=>{console.log(l),c.addMessage(a.nameBanners,!0,l)}).then(()=>{console.log("e"),v.value=!1,console.log(v.value),c.addMessage(a.nameBanners,!1)},l=>console.log(l))}catch(l){v.value=!1,c.addMessage(a.nameBanners,!0),console.log(a.nameBanners+l)}}function h(l,g){Y(S.value,l,"url",g)}function L(l,g){Y(S.value,l,"text",g)}function p(l){u.value=l}const S=d([]),w=d([]);function C(l){for(const g of l){let m=be(),b={id:m,image:g},ue={id:m,downloadUrl:URL.createObjectURL(g)};S.value.push(b),w.value.push(ue)}}const U=d([]);function D(l,g){ye(l,w.value,S.value,a.name,U.value,g)}const e=I(()=>Object.keys(S.value).length>0||Object.keys(U.value).length?(console.log(1),!1):r.value?(console.log(u.value),console.log(s.value),!1):W.value?(console.log(1),!1):!0),i=[5,10,15],n=d("5"),E=d("5"),W=I(()=>n.value!=E.value);return(l,g)=>(f(),O(re,null,{title:y(()=>[T(te(a.nameBanners),1)]),label:y(()=>[x(Ze,{value:u.value,onInputValue:p},null,8,["value"])]),body:y(()=>[o("div",na,[(f(!0),B(z,null,oe(w.value,m=>(f(),O(Se,{key:m.id,id:m.id,src:m.downloadUrl,url:m.url,fullPath:m.fullPath,text:m.text,ratio:"19%",onUpdatUrl:h,onUpdateText:L,onClose:D},null,8,["id","src","url","fullPath","text"]))),128)),x(se,{multiple:!0,onUploadedFiles:C})])]),footer:y(()=>[x(aa,{modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=m=>n.value=m),selectText:i},{default:y(()=>[T(" Швидкість зміни слайдів ")]),_:1},8,["modelValue"]),x(q,{class:"banner__saving-button",onClick:F,disabled:P(e),loading:v.value},{default:y(()=>[oa]),_:1},8,["disabled","loading"])]),_:1}))}},ee=M(ta,[["__scopeId","data-v-9d4628d6"]]),ca={__name:"BannersPage",setup(t){const _=d(!1);function a(r){_.value=r}const c={name:"topBanner",folderForSaveFile:"banners",nameBanners:"На головній верх"},u="backgroundBanner",s={name:"newsBanners",folderForSaveFile:"banners",nameBanners:"На головній новини та акції"};return(r,v)=>(f(),B(z,null,[_.value?(f(),O(ze,{key:0})):R("",!0),x(ee,{name:c.name,folderForSaveFile:c.folderForSaveFile,nameBanners:c.nameBanners,onGoingLoading:a},null,8,["name","folderForSaveFile","nameBanners"]),x(Ee,{name:u,onGoingLoading:a}),x(ee,{name:s.name,folderForSaveFile:s.folderForSaveFile,nameBanners:s.nameBanners,onGoingLoading:a},null,8,["name","folderForSaveFile","nameBanners"])],64))}};export{ca as default};

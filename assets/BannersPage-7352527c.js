import{_ as w,r as _,o as v,c as x,a as n,p as M,b as N,w as F,u as ae,d as R,e as T,t as ne,s as te,f as L,g as C,h as S,i as V,j as G,v as X,k as O,l as P,m as ce,n as D,q as Z,x as H,y as ie,P as J,z as _e,A as ve,B as he,C as ge,D as pe,E as fe,F as me,G as be,H as z,I as oe,J as se,K as xe,L as Q,M as Y,N as ye,O as Se}from"./index-32c2991f.js";import{G as re,C as ee}from"./CastomInput-d46fc37a.js";import{C as K}from"./CastomButton-27311979.js";import"./index.esm-d139be39.js";const Be=a=>(M("data-v-3ffb45bb"),a=a(),N(),a),ke={class:"file-upload"},Ce=["multiple"],we=Be(()=>n("span",null,"Додати файл",-1)),Ue={__name:"FileUpload",props:{multiple:Boolean},emits:["uploadedFiles"],setup(a,{emit:i}){const e=a,r=_(null),c=async()=>{console.log(r.value.files),i("uploadedFiles",r.value.files)};return(o,d)=>(v(),x("div",ke,[n("label",null,[n("input",{name:"file",class:"input-file",ref_key:"file",ref:r,onChange:d[0]||(d[0]=u=>c()),type:"file",multiple:e.multiple},null,40,Ce),we])]))}},ue=w(Ue,[["__scopeId","data-v-3ffb45bb"]]);const E=a=>(M("data-v-9171cdf6"),a=a(),N(),a),Fe={class:"through-banner"},$e={class:"through-banner__main-block"},Ie={class:"through-banner__checkbox-section"},Te={class:"through-banner__checkbox-box"},Ve=E(()=>n("label",{class:"through-banner__checkbox-lebel",for:"img"},"Фото на фон",-1)),Pe={class:"through-banner__checkbox-box"},Oe=E(()=>n("label",{class:"through-banner__checkbox-lebel",for:"color"},"Колір на фон",-1)),Me={class:"through-banner__adding-section"},Ne={key:0,class:"through-banner__photo-box"},Le={key:0,class:"through-banner__img-box"},De={class:"through-banner__img"},Re=["src"],Ee={key:1,class:"through-banner__selected-color-box"},je={class:"through-banner__color-box"},qe=E(()=>n("label",{for:"colorWell"},"Color:",-1)),Ae=E(()=>n("span",null,"Зберегти",-1)),Ge={__name:"ThroughBanner",props:{name:{type:String,required:!0}},emits:["goingLoading"],setup(a,{emit:i}){const e=a,r=_(!1);F(r,l=>{console.log(l),i("goingLoading",l)});const c=ae();R(()=>{U()});function o(){u.value=null,g.value=null}const d=_(""),u=_(null),g=_(null),B=_(null),p=_({}),j=T(()=>Object.keys(p.value).length>0||g.value?!1:!$.value),m=_({});let k;async function U(){try{k=await ne(te(L,e.name)),k.empty||k.forEach(l=>{m.value=l.data(),l.data().downloadUrl&&(u.value=l.data().downloadUrl),l.data().whichBanner&&(d.value=l.data().whichBanner),l.data().selectingColor&&(B.value=l.data().selectingColor)})}catch(l){console.log(l)}}const $=_(null);F(u,(l,h)=>{l==null&&l!=h&&($.value=!0)}),F(d,l=>{m.value.whichBanner!=l?p.value.whichBanner=l:p.value.whichBanner&&m.value.whichBanner==l&&delete p.value.whichBanner}),F(B,l=>{m.value.selectingColor!=l?p.value.selectingColor=l:p.value.selectingColor&&m.value.selectingColor==l&&delete p.value.selectingColor});function I(l){for(const h of l)u.value=URL.createObjectURL(h),g.value=h}async function q(){try{new Promise((l,h)=>{r.value=!0,g.value==null&&$.value?Z(m.value.fullPath).then(()=>{const s=H(L,e.name,"main");ie(s,{fullPath:J(),downloadUrl:J()})}).then(()=>{delete m.value.fullPath,delete m.value.downloadUrl,console.log(m.value),$.value=null,l()}).catch(s=>{console.log(s),h()}):g.value?_e(g.value,"banners/"+e.name+"/").then(s=>(m.value.fullPath&&Z(m.value.fullPath),s),s=>console.log(s)).then(s=>{p.value.downloadUrl=s.downloadUrl,p.value.fullPath=s.metadata.fullPath,l()},s=>console.log(s)).catch(s=>{console.log(s),h()}):(l(),h())}).then(()=>{Object.keys(p.value).length&&(ve(H(L,e.name,"main"),p.value,{merge:!0}),g.value=null,Object.keys(p.value).forEach(l=>{m.value[l]=p.value[l],delete p.value[l]})),r.value=!1,c.addMessage("Наскрізний банер на задньому фоні",!1)})}catch(l){r.value=!1,c.addMessage(e.name,!0),console.log("Наскрізний банер на задньому фоні"+l)}}return(l,h)=>(v(),x("div",Fe,[C(re,null,{title:S(()=>[V(" Наскрізний банер на задньому фоні ")]),label:S(()=>[]),body:S(()=>[n("div",$e,[n("div",Ie,[n("div",Te,[G(n("input",{class:"through-banner__checkbox-input",type:"radio",id:"img",name:"through-banner",value:"img","onUpdate:modelValue":h[0]||(h[0]=s=>d.value=s)},null,512),[[X,d.value]]),Ve]),n("div",Pe,[G(n("input",{class:"through-banner__checkbox-input",type:"radio",id:"color",name:"through-banner",value:"color","onUpdate:modelValue":h[1]||(h[1]=s=>d.value=s)},null,512),[[X,d.value]]),Oe])]),n("div",Me,[d.value=="img"?(v(),x("div",Ne,[u.value?(v(),x("div",Le,[n("div",De,[n("img",{src:u.value},null,8,Re)])])):O("",!0),C(ue,{class:"through-banner__upload",multiple:!1,onUploadedFiles:I}),u.value?(v(),P(K,{key:1,class:"through-banner__del-photo-btn",onClick:o},{default:S(()=>[V(" Видалити ")]),_:1})):O("",!0)])):(v(),x("div",Ee,[n("div",je,[qe,G(n("input",{type:"color","onUpdate:modelValue":h[2]||(h[2]=s=>B.value=s)},null,512),[[ce,B.value]])])]))])])]),footer:S(()=>[C(K,{class:"through-banner__saving-button",onClick:q,disabled:D(j),loading:r.value},{default:S(()=>[Ae]),_:1},8,["disabled","loading"])]),_:1})]))}},Ke=w(Ge,[["__scopeId","data-v-9171cdf6"]]);const ze={},We=a=>(M("data-v-a9e24223"),a=a(),N(),a),Xe={class:"modal"},Ze=We(()=>n("div",{class:"modal__box"},[n("h1",null,[V("ЗАЧЕКАЙТЕ, "),n("br"),V("ІДЕ ЗАВАНТАЖЕННЯ")])],-1)),He=[Ze];function Je(a,i){return v(),x("div",Xe,He)}const Qe=w(ze,[["render",Je],["__scopeId","data-v-a9e24223"]]);const Ye=["aria-checked","onKeydown"],el={__name:"ToggleCheckbox",props:{value:Boolean},emits:["inputValue"],setup(a,{emit:i}){const e=a,r=T(()=>({"gold-mid":e.value,"gray-lighter":!e.value})),c=T(()=>({transform:e.value?"translateX(14px)":"translateX(0)"}));function o(){i("inputValue",!e.value)}return(d,u)=>(v(),x("div",null,[n("span",{class:"toggle-wrapper",role:"checkbox","aria-checked":a.value.toString(),tabindex:"0",onClick:o,onKeydown:pe(fe(o,["prevent"]),["space"])},[n("span",{class:he(["toggle-background",D(r)])},null,2),n("span",{class:"toggle-indicator",style:ge(D(c))},null,4)],40,Ye)]))}},ll=w(el,[["__scopeId","data-v-6d87246f"]]);const al={},nl=a=>(M("data-v-29c107d0"),a=a(),N(),a),tl={class:"close"},ol=nl(()=>n("div",{class:"close__criss-cross"},null,-1)),sl=[ol];function rl(a,i){return v(),x("div",tl,sl)}const ul=w(al,[["render",rl],["__scopeId","data-v-29c107d0"]]);const dl={class:"card"},cl={class:"card__body"},il={class:"card__img-box"},_l={class:"card__img"},vl=["src"],hl={__name:"ImageCard",props:{id:String,ratio:String,src:String,text:String,url:String,fullPath:String,isText:{type:Boolean,default:!0},isUrl:{type:Boolean,default:!0}},emits:["updatUrl","updateText","close"],setup(a,{emit:i}){const e=a;me(u=>({"19aa9493":e.ratio}));const r=_("");F(r,u=>{u!=e.url&&i("updatUrl",e.id,u)});function c(){e.url&&(r.value=e.url)}const o=_("");F(o,u=>{u!=e.text&&i("updateText",e.id,u)});function d(){e.text&&(o.value=e.text)}return R(()=>{c(),d()}),(u,g)=>(v(),x("div",dl,[n("div",cl,[C(ul,{class:"card__close",onClick:g[0]||(g[0]=B=>u.$emit("close",e.id,e.fullPath))}),n("div",il,[n("div",_l,[n("img",{src:e.src},null,8,vl)])]),e.isUrl?(v(),P(ee,{key:0,modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=B=>r.value=B),class:"card__input-box",name:"url",type:"url",label:"URL:",placeholder:"URL"},null,8,["modelValue"])):O("",!0),e.isText?(v(),P(ee,{key:1,modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=B=>o.value=B),class:"card__input-box",name:"text",type:"text",label:"Текст:",placeholder:"Текст"},null,8,["modelValue"])):O("",!0)])]))}},gl=w(hl,[["__scopeId","data-v-cc7e085c"]]);const pl={class:"select"},fl={for:"select",class:"select__label-select"},ml=["value"],bl=["value"],xl={__name:"CastomSelect",props:["modelValue","selectText","selectValue"],emits:["update:modelValue"],setup(a){const i=a,e=_([]);function r(){const c=i.selectValue!==void 0?i.selectValue:i.selectText;for(let o=0;o<i.selectText.length;o++)e.value.push({value:i.selectText[o],text:c[o]})}return R(()=>{r()}),(c,o)=>(v(),x("div",pl,[n("label",fl,[be(c.$slots,"default",{},void 0,!0)]),n("select",{class:"select__body",name:"select",value:i.modelValue,onInput:o[0]||(o[0]=d=>c.$emit("update:modelValue",d.target.value))},[(v(!0),x(z,null,oe(e.value,d=>(v(),x("option",{value:d.value,key:d.value},se(d.text),9,bl))),128))],40,ml)]))}},yl=w(xl,[["__scopeId","data-v-c8e98b8d"]]);const Sl=a=>(M("data-v-9d4628d6"),a=a(),N(),a),Bl={class:"banner__main-block"},kl=Sl(()=>n("span",null,"Зберегти",-1)),Cl={__name:"UniversalBanner",props:{name:{type:String,required:!0},folderForSaveFile:{type:String,required:!0},nameBanners:{type:String,required:""}},emits:["goingLoading"],setup(a,{emit:i}){const e=a,r=ae(),c=_(!0),o=_(!0),d=T(()=>c.value!=o.value),u=_(!1);F(u,t=>{i("goingLoading",t)}),R(()=>{g(e.name,U.value)});async function g(t,f){(await ne(te(L,t))).forEach(y=>{y.id!="showingBlock"&&y.id!="sliderSpeed"?f.push(y.data()):y.id=="showingBlock"?(c.value=y.data().show,o.value=y.data().show):y.id=="sliderSpeed"&&(s.value=y.data().speed,A.value=y.data().speed)})}async function B(){try{new Promise((t,f)=>{u.value=!0,Object.keys(k.value).length||Object.keys(I.value).length?new Promise((b,y)=>{xe(k.value,e.name,I.value,e.folderForSaveFile+"/"+e.name+"/",U.value).then(()=>{b(),y()})}).then(()=>t(),()=>f()):(t(),f())}).catch(t=>console.log(t)).then(()=>{d.value&&(Q("showingBlock",e.name,"show",c.value,!1),o.value=c.value)},t=>{console.log(t)}).then(()=>{W.value&&(Q("sliderSpeed",e.name,"speed",s.value,!1),A.value=s.value)},t=>{console.log(t),r.addMessage(e.nameBanners,!0,t)}).then(()=>{console.log("e"),u.value=!1,console.log(u.value),r.addMessage(e.nameBanners,!1)},t=>console.log(t))}catch(t){u.value=!1,r.addMessage(e.nameBanners,!0),console.log(e.nameBanners+t)}}function p(t,f){Y(k.value,t,"url",f)}function j(t,f){Y(k.value,t,"text",f)}function m(t){c.value=t}const k=_([]),U=_([]);function $(t){for(const f of t){let b=ye(),y={id:b,image:f},de={id:b,downloadUrl:URL.createObjectURL(f)};k.value.push(y),U.value.push(de)}}const I=_([]);function q(t,f){Se(t,U.value,k.value,e.name,I.value,f)}const l=T(()=>Object.keys(k.value).length>0||Object.keys(I.value).length?(console.log(1),!1):d.value?(console.log(c.value),console.log(o.value),!1):W.value?(console.log(1),!1):!0),h=[5,10,15],s=_("5"),A=_("5"),W=T(()=>s.value!=A.value);return(t,f)=>(v(),P(re,null,{title:S(()=>[V(se(e.nameBanners),1)]),label:S(()=>[C(ll,{value:c.value,onInputValue:m},null,8,["value"])]),body:S(()=>[n("div",Bl,[(v(!0),x(z,null,oe(U.value,b=>(v(),P(gl,{key:b.id,id:b.id,src:b.downloadUrl,url:b.url,fullPath:b.fullPath,text:b.text,ratio:"19%",onUpdatUrl:p,onUpdateText:j,onClose:q},null,8,["id","src","url","fullPath","text"]))),128)),C(ue,{multiple:!0,onUploadedFiles:$})])]),footer:S(()=>[C(yl,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=b=>s.value=b),selectText:h},{default:S(()=>[V(" Швидкість зміни слайдів ")]),_:1},8,["modelValue"]),C(K,{class:"banner__saving-button",onClick:B,disabled:D(l),loading:u.value},{default:S(()=>[kl]),_:1},8,["disabled","loading"])]),_:1}))}},le=w(Cl,[["__scopeId","data-v-9d4628d6"]]),Il={__name:"BannersPage",setup(a){const i=_(!1);function e(d){i.value=d}const r={name:"topBanner",folderForSaveFile:"banners",nameBanners:"На головній верх"},c="backgroundBanner",o={name:"newsBanners",folderForSaveFile:"banners",nameBanners:"На головній новини та акції"};return(d,u)=>(v(),x(z,null,[i.value?(v(),P(Qe,{key:0})):O("",!0),C(le,{name:r.name,folderForSaveFile:r.folderForSaveFile,nameBanners:r.nameBanners,onGoingLoading:e},null,8,["name","folderForSaveFile","nameBanners"]),C(Ke,{name:c,onGoingLoading:e}),C(le,{name:o.name,folderForSaveFile:o.folderForSaveFile,nameBanners:o.nameBanners,onGoingLoading:e},null,8,["name","folderForSaveFile","nameBanners"])],64))}};export{Il as default};
